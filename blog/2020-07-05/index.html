<!DOCTYPE html>

<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="/etc/site/style.css">
  <title>bydriv.github.io</title>
  <meta property="og:url" content="https://bydriv.github.io/blog/2020-07-05/" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="bydriv.github.io" />
  <meta property="og:description" content="A-Frame &amp; WebVR 周辺について" />
  <meta property="og:site_name" content="bydriv.github.io" />
  <meta property="og:image" content="https://bydriv.github.io/etc/site/thumbnail.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <script type="text/javascript" src="/etc/site/kt.js"></script>
</head>

<div class="navigation"><!--
--><div class="left"><!--
--><a class="section" href="/">&#x221A;</a><!--
--><a class="section" href="/blog">&#x1F4DD;</a><!--
--><a class="section" href="/illustration">&#x1F3A8;</a><!--
--><a class="section" href="/photo">&#x1F4F7;</a><!--
--><a class="section" href="/literature">&#x1F516;</a><!--
--><a class="section" href="/world">&#x1F4BD;</a><!--
--><a class="section" href="/comic">&#x1F4AD;</a><!--
--><a class="section" href="/vr">&#x1F9E9;</a><!--
--><a class="section" href="/misc">&#x1F4C1;</a><!--
--></div>&nbsp;<!--
--><div class="right"><!--
--><a class="holoio section" href="#holoio">&#x22EF;</a><!--
--></div><!--
--></div><!--
--><div id="holoio">
<div class="navigation"><!--
--><div class="left"><!--
-->&nbsp;</div>&nbsp;<!--
--><div class="right"><!--
--><a class="section" href="#">&#x2573;</a><!--
--></div><!--
--></div>

<div class="kt-month-calendar" data-today="true"></div>
</div>

<article>
<h1 id="a-frame-webvr-周辺について">A-Frame &amp; WebVR 周辺について</h1>
<p>先日 Oculus Quest が届いたので、 A-Frame というものを使ってみた。</p>
<p>まず VR App を開発するには Native で開発するか WebVR で開発するかという選択肢がある。 WebVR で開発する場合 WebVR の API を生で使ってももちろんいいが、フレームワークを使うこともできる。 A-Frame はそういうフレームワークのひとつ、という位置付けらしい。</p>
<p>開発したものはここ: <a href="/vr">bydriv.github.io/vr</a></p>
<p>いまのところ、上古の時代にモデリングの練習につくったテーリのモデルが置いてある。</p>
<p>基本的には公式のチュートリアルや Web 上の記事を読めばいい。しかし API がけっこう頻繁に変わっていたようで、最新バージョンで動かないコードも散見された (たとえば、 <code>&lt;a-cube&gt;</code> タグは <code>&lt;a-box&gt;</code> タグに変更されたようだ)。なので最終的に信頼すべきものは公式の API ドキュメント (<a href="https://aframe.io/docs/1.0.0/introduction/" class="uri">https://aframe.io/docs/1.0.0/introduction/</a>) だ。</p>
<h2 id="とりあえずモデルを表示する">とりあえずモデルを表示する</h2>
<p>まず Blender でモデリングをする(このへんについては割愛)。 Export するときは gltf というフォーマットで出力。 aframe の JS ファイルは <code>/vendor/aframe-v1.0.4.min.js</code> に、 model の glTF ファイルは <code>model.gltf</code> にそれぞれ置かれているものとする。すると以下の html ファイルで WebVR に対応したページが作成できる。</p>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span>
<span class="kw">&lt;html&gt;</span>
  <span class="kw">&lt;head&gt;</span>
    <span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;/vendor/aframe-v1.0.4.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span>
  <span class="kw">&lt;/head&gt;</span>
  <span class="kw">&lt;body&gt;</span>
    <span class="kw">&lt;a-scene&gt;</span>
      <span class="kw">&lt;a-assets&gt;</span>
        <span class="kw">&lt;a-asset-item</span><span class="ot"> id=</span><span class="st">&quot;model&quot;</span><span class="ot"> src=</span><span class="st">&quot;model.gltf&quot;</span><span class="kw">&gt;&lt;/a-asset-item&gt;</span>
      <span class="kw">&lt;/a-assets&gt;</span>
      <span class="kw">&lt;a-gltf-model</span><span class="ot"> src=</span><span class="st">&quot;#model&quot;</span><span class="ot"> position=</span><span class="st">&quot;0 1 0&quot;</span><span class="kw">&gt;&lt;/a-gltf-model&gt;</span>
      <span class="kw">&lt;a-camera</span>
<span class="ot">         position=</span><span class="st">&quot;0 1 4&quot;</span>
<span class="ot">         cursor-visible=</span><span class="st">&quot;true&quot;</span>
<span class="ot">         cursor-scale=</span><span class="st">&quot;2&quot;</span>
<span class="ot">         cursor-color=</span><span class="st">&quot;#0095DD&quot;</span>
<span class="ot">         cursor-opacity=</span><span class="st">&quot;0.5&quot;</span><span class="kw">&gt;</span>
      <span class="kw">&lt;/a-camera&gt;</span>
  <span class="kw">&lt;/body&gt;</span>
<span class="kw">&lt;/html&gt;</span></code></pre></div>
<p>(もし表示されない場合、モデルの大きさなどの関係で表示範囲外に配置されてしまっている可能性がある。 <code>&lt;a-gltf-model&gt;</code> や <code>&lt;a-camera&gt;</code> の <code>position</code> パラメタを適宜調整すること)</p>
<p>こうすると PC のブラウザで表示すると単なる 3D モデルが表示された web page に見えるが、 VR 機器ではフルスクリーン（？）にすることで VR で表示できる。</p>
<p>たとえば Oculus Quest の場合 Oculus Browser で当該ページにアクセスし、右下の VR ボタンを押す。</p>
<h2 id="gltf-とは">glTF とは</h2>
<p>glTF は 3D モデルのファイルフォーマットのひとつらしい。この形式のファイルフォーマットを得るには、</p>
<ol style="list-style-type: decimal">
<li>Blender で直接 gltf を出力する</li>
<li>COLLADA2GLTF を利用する</li>
</ol>
<p>などの方法があるようだ。</p>
</article>
